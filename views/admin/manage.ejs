<!DOCTYPE html>
<html lang="en">
<head>
    <%-include('head.ejs') %>
    <script src="/admin/js/manage.js"></script>
</head>
<body>
    <div class="wrap">
        <%-include('nav.ejs') %>

        <header>
            <div class="toolbar">
                <div class="toolbar__menu">
                    <a href="javascript:;">
                        <i class="fas fa-angle-double-left"></i>
                        <!-- menu -->
                        <!-- <i class="fas fa-bars"></i> -->
                    </a>
                </div>
                <div class="toolbar__logout">
                    <a href="/admin/logout">
                        <i class="fas fa-sign-out-alt"></i>
                    </a>
                </div>
            </div>
        </header>

        <main>
            <div class="content">
                <div class="mng">
                    <div class="mng__setting">
                        <div class="card">
                            <div class="mng__title">
                                <span>카테고리 관리</span>
                                <a href="javascript:;" id="categoryBtn" class="mng__title--btn">
                                    <span>
                                        <i class="fas fa-cog"></i>
                                    </span>
                                </a>
                            </div>

                            <!-- category(project) -->
                            <div class="mng-category">
                            <% 
                                for(let i = 0; i < rows1.length; i++) {
                                    let data = rows1[i]; 
                            %>
                                <div class="mng-category__all">
                                    <a href="javascript:;" data-main-id="<%= data.main_id %>" class="<%= data.main_id == 1 ? 'active' : ''%>"><%= data.main_title %></a>
                                </div>
                                <ul class="mng-category__list">
                                <%  
                                    if(data.main_id === 1){
                                    for(let j = 0; j < rows2.length; j++) {
                                        let data2 = rows2[j];
                                        if(data2.main_id === 1){
                                %>
                                            <li>
                                                <a href="javascript:;" data-main-id="<%= data2.main_id %>" data-sub-id="<%= data2.sub_id %>"><%= data2.sub_title %></a>
                                            </li>
                                        <% } %>
                                    <% } %>
                                </ul>
                                <% } else { 
                                    for(let k = 0; k < rows2.length; k++) {
                                        let data3 = rows2[k];
                                        if(data3.main_id === 2){
                                %>
                                            <li>
                                                <a href="javascript:;" data-main-id="<%= data3.main_id %>" data-sub-id="<%= data3.sub_id %>"><%= data3.sub_title %></a>
                                            </li>
                                        <% } %>
                                    <% } %>
                                <% } %>
                            <% } %>
                            </div>
                        </div>
                    </div>

                    <!-- right -->
                    <div class="mng__data">
                        <!-- top option -->
                        <div class="mng__option">
                            <form action="" method="get">
                                <fieldset>
                                    <legend class="visually-hidden">검색</legend>
                                    <div class="mng__search">
                                        <input type="text" placeholder="Search" class="mng-search--input">
                                        <button type="submit" class="btn btn-simple">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                </fieldset>
                            </form>
                            <div class="mng__btn display-none">
                                <a href="javascript:;" id="boardAddBtn" class="btn btn-simple"><i class="fas fa-plus"></i></a>
                                <a href="javascript:;" id="boardModBtn" class="btn btn-simple"><i class="fas fa-edit"></i></a>
                                <a href="javascript:;" class="btn btn-simple"><i class="fas fa-trash"></i></a>
                            </div>
                        </div>

                        <div class="mng__empty display-none">등록된 프로젝트가 없습니다.</div>

                        <div class="mng__table">
                            <div class="card">
                                <table>
                                    <colgroup> 
                                        <col style="width:3%"> 
                                        <col style="width:10%"> 
                                        <col style="width:6%">
                                        <col style="width:12%">
                                        <col style="width:25%">
                                        <col style="width:12%">
                                        <col style="width:12%">
                                        <col style="width:10%">
                                        <col style="width:10%">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th scope="col"><input type="checkbox" id="cateAllChk"></th>
                                            <th scope="col">순번</th>
                                            <th scope="col">이미지</th>
                                            <th scope="col">제목</th>
                                            <th scope="col">내용</th>
                                            <th scope="col">작성일</th>
                                            <th scope="col">수정일</th>
                                            <th scope="col">메인 카테고리</th>
                                            <th scope="col">서브 카테고리</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% 
                                            for(let i=0; i < rows3.length; i++){
                                                let data = rows3[i];
                                        %>
                                        <tr>
                                            <td class="mng__table--center"><input type="checkbox" name="cateChk"></td>
                                            <td class="mng__table--center"><%= data.idx %></td>
                                            <td class="mng__table--center"><a href="javascript:;"><img src="http://www.jeong9-9.com/img/thumbnail/card16_thumbnail.jpg" class="mng__table--thumb"></a></td>
                                            <td class="mng__table--center"><%= data.title %></td>
                                            <td class="mng__table--center"><%= data.content %></td>
                                            <td class="mng__table--center"><%= data.regdate %></td>
                                            <td class="mng__table--center"><%= data.modidate %></td>
                                            <td class="mng__table--center"><%= data.main_id %></td>
                                            <td class="mng__table--center"><%= data.sub_id %></td>
                                        </tr>
                                        <% } %>
                                    </tbody>
                                </table>
                            </div>
                            <div class="mng__pagination">
                                <ul class="pagination">
                                    <li class="prev disabled">
                                        <a href="javascript:;"><i class="fas fa-chevron-left"></i></a>
                                    </li>
                                    <li class="active"><a href="javascript:;">1</a></li>
                                    <li><a href="javascript:;">2</a></li>
                                    <li><a href="javascript:;">3</a></li>
                                    <li class="next disabled">
                                        <a href="javascript:;"><i class="fas fa-chevron-right"></i></a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </main>

        <!-- Category Manager Pop Up -->
        <form id="categoryForm" autocomplete="off">
            <fieldset>
                <legend>Choose your Category</legend>
                <div class="modal fade display-none"><!-- display-none -->
                    <div class="modal__dialog modal__dialog--centered">
                        <div class="modal__content modal__category">
                            <div class="modal__header">
                                <h2 class="modal__title">New Category</h2>
                                <div class="modal__btn">
                                    <button type="button" id="cancelBtn" class="btn btn-cancel">Cancel</button>
                                    <button type="submit" id="confirmBtn" class="btn btn-confirm">Confirm</button>
                                </div>
                            </div>
                            <div class="modal__body">
                                <div class="modal__tree">
                                    <div class="modal__new--btn">
                                        <button type="button" id="categoryNewBtn" class="btn btn-primary"><i class="fas fa-plus"></i></button>
                                    </div>

                                    <ul class="modal__tree--list"></ul>
                                    <div class="modal__generate"></div>
                                </div>
                                <div class="modal__mod">
                                    <input type="text" id="categorySubIdInput" name="categorySubId">

                                    <label for="categoryNameInput">카테고리 이름</label>
                                    <input type="text" id="categoryNameInput" name="categoryName" readonly>

                                    <div class="modal__mod--kinds">
                                        <input type="radio" id="categoryOwn" name="categoryKinds"  value="1" checked>
                                        <label for="categoryOwn">Poroject</label>
                                        <input type="radio" id="categoryTwo" name="categoryKinds"  value="2">
                                        <label for="categoryTwo">Artwork</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </form>
        <!-- Category Manager Pop Up -->
    </div>
</body>
</html>